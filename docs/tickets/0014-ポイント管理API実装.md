# ポイント管理API実装

### ステータス

`Done`

### GitHub Copilot 対応: 可能

> サービス層・リポジトリ層の実装はCopilot対応可能

---

### 概要

ポイントの付与・消費・残高照会APIを実装する。

### 背景・動機

活動評価によるポイント付与と、お小遣い変換（500ポイント単位）の基盤。

### ゴール

- [x] `src/routes/api/v1/points/[childId]/+server.ts` (GET: 残高取得)
- [x] `src/routes/api/v1/points/[childId]/history/+server.ts` (GET: 履歴取得)
- [x] `src/routes/api/v1/points/convert/+server.ts` (POST: お小遣い変換)
- [x] `$lib/server/services/point-service.ts`
- [x] `$lib/server/db/point-repo.ts`
- [x] `$lib/domain/validation/point.ts` (Zodスキーマ)
- [x] ポイント付与ロジック（activity-log-serviceから台帳に記録済み）
- [x] ポイント→お小遣い変換ロジック（500P単位）
- [x] ユニットテスト（12テスト全パス）

### 作業メモ

- ポイント残高はマイナスにならないこと
- 変換履歴を保持すること

### 成果・結果

- ポイント残高取得API（変換可能額算出含む）
- ポイント履歴取得API（limit/offset対応）
- ポイント変換API（500P単位、残高不足チェック）
- リポジトリ層・サービス層・バリデーション実装
- ユニットテスト12件全パス

### 残課題・次のアクション

