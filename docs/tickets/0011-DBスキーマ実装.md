# DBスキーマ実装

### ステータス

`Done`

### GitHub Copilot 対応: 可能

> Drizzle ORM スキーマ定義はデータベース設計書を入力としてCopilotが実装可能

---

### 概要

データベース設計書（#0008）に基づき、Drizzle ORM スキーマとマイグレーションを実装する。

### 背景・動機

全機能の基盤となるデータベーススキーマを先行実装する。

### ゴール

- [x] `src/lib/server/db/schema.ts` にDrizzle ORMスキーマ定義
- [x] `src/lib/server/db/client.ts` にDBクライアント初期化
- [x] マイグレーション実行・動作確認
- [x] シードデータ作成（初期活動マスタ、初期ステータス値）
- [x] スキーマのユニットテスト

### 作業メモ

- データベース設計書 (#0008) に準拠
- SQLiteファイルの配置場所とバックアップ方針を確認

### 成果・結果

- 全11テーブルの Drizzle ORM スキーマ定義完了（children, activities, activityLogs, pointLedger, statuses, statusHistory, evaluations, marketBenchmarks, settings, characterImages, loginBonuses）
- DBクライアント初期化（WALモード、外部キー制約ON）
- シードデータスクリプト（冪等性あり）: 子供1名、活動15件、ベンチマーク5件、初期ステータス5件、PIN設定
- ユニットテスト20件全テスト合格（ユニーク制約、外部キー制約の検証含む）
- `npx drizzle-kit push` でマイグレーション成功
- `npm run build` & `npm run check` 通過

### 残課題・次のアクション

- API実装チケット群へ展開
